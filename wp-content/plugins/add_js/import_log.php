<?phpadd_action( 'admin_menu', 'my_plugin_fields_import' );function my_plugin_fields_import() {	//add_submenu_page( 'woocommerce', 'Import products', 'Import products', 'manage_options','import-products', 'my_plugin_fields_imp');	add_submenu_page( 'options-general.php', 'Import post & product', 'Import post & product', 'manage_options', 'import-products', 'my_plugin_fields_imp' );}function my_plugin_fields_imp() {	global $wpdb;	?>	<link rel="stylesheet" type="text/css" href="<?php echo get_site_url(); ?>/wp-content/plugins/import/css/sweetalert.css" />	<link rel="stylesheet" type="text/css" href="<?php echo get_site_url(); ?>/wp-content/plugins/import/css/fakeLoader.css" />	<link rel="stylesheet" type="text/css" href="<?php echo get_site_url(); ?>/wp-content/plugins/import/css/bootstrap.min.css" />	<script type="text/javascript" src="<?php echo get_site_url(); ?>/wp-content/plugins/import/js/jquery-1.12.0.min.js"></script>	<script src="<?php echo plugins_url(); ?>/import/js/tableExport.js" type="text/javascript"></script>	<script type="text/javascript" src="<?php echo plugins_url(); ?>/import/js/sweetalert.min.js"></script>	<script type="text/javascript" src="<?php echo get_site_url(); ?>/wp-content/plugins/import/js/fakeLoader.min.js"></script>	<style>select{min-height: 35px;}</style>	<div class="fakeloader"></div>		<div class="col-md-10">		<form id="condition">			<div class="form-group">				<h4>IMPORT POST OR PRODUCT</h4>				<p><a target="_blank" href="https://www.youtube.com/watch?v=dlqR8KoAR38&feature=youtu.be" >Hướng dẫn</a></p>			</div>			<div class="form-group">				<label for="sel1">Nhập đường dẫn Google Drive:</label>				<input type="text" class="form-control" id="url">			</div>			<div class="form-group">				<div class="checkbox">					<label style="line-height: 25px;"><input type="checkbox" value="post" name="type">Bài viết</label>				</div>				<div class="checkbox">					<label style="line-height: 25px;"><input type="checkbox" value="product" name="type">Sản phẩm</label>				</div>			</div>						<button type="submit" class="btn btn-display btn-default" >Import</button>		</form>	</div>	<div class="clear"></div>	<script type="text/javascript">		$(".fakeloader").fakeLoader({			timeToHide:100, 			zIndex:"999",			bgColor:"$cccccc"		});	</script>	<div class="container-fluid">	<h2>Blog Import</h2>	<table class="table table-striped">	<thead>      <tr>        <th>STT</th>        <th style="width:100px;">Ngày</th>        <th>Dữ liệu import</th>        <th>Trạng thái</th>      </tr>    </thead>	<tbody>	  				<?php		$handle = fopen(ABSPATH . "wp-content/plugins/import/log.txt", "r");		if ($handle) {			$i=1;			while (($line = fgets($handle)) !== false) {				$exp = explode("|", $line);				if(count($exp)>1){					$str = "";				?>				<tr>					<td><?php echo $i; ?></td>					<td><?php echo end($exp); ?></td>					<td>					<?php					$exps = get_by_cron($exp[0]);										//print_r($exps[0]); die;					if(count($exps)>0){						$i++;						foreach($exps[0] as $k=>$v){							if($v != ""){								$str = $str == "" ? $k." : " . $v : $str." | ".$k." : " . $v;							}else{								$str = $str == "" ? $k." : NULL " : $str." | ".$k." : NULL";							}						}						echo $str."<br/>";						$str = "";					}					?>					</td>					<td>Error</td>				</tr>				<?php			}			}			fclose($handle);		} else {			// error opening the file.		}	?>		  	</tbody>	</table><?php}add_action( 'wp_ajax_nopriv_ajax_ajax_condition_imp_dis', 'set_ajax_condition_imp_dis' );add_action( 'wp_ajax_ajax_condition_imp_dis', 'set_ajax_condition_imp_dis' );function set_ajax_condition_imp_dis() {	set_time_limit (0);	extract($_POST);	$site = get_site_url();	//echo $site.'/wp-admin/admin-ajax.php?action=solid_import&cmd=download.drive.xlsx&url='.$url; die;	if(trim($url) != ""){		$response = file_get_contents($site.'/wp-admin/admin-ajax.php?action=solid_import&cmd=download.drive.xlsx&url='.$url);		echo $response; die;	}	echo "Url rỗng"; die;}add_action( 'wp_ajax_nopriv_ajax_ajax_unzip', 'set_ajax_unzip' );add_action( 'wp_ajax_ajax_unzip', 'set_ajax_unzip' );function set_ajax_unzip() {	set_time_limit (0);	extract($_POST);	//echo 'http://localhost/wp/shipchung/wp-admin/admin-ajax.php?action=solid_import&cmd=unzip'.$type; die;	$site = get_site_url();	$response = file_get_contents($site.'/wp-admin/admin-ajax.php?action=solid_import&cmd=unzip&type='.$type);	echo $response; die;}function get_by_cron($id) {	global $wpdb;	$results = $wpdb->get_results( "SELECT * FROM {$wpdb->prefix}cronjob WHERE id = $id", OBJECT );	return $results;}